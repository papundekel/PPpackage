#!/usr/bin/env python

import sys
import json


def get_cache_path(cache_path):
    return f"{cache_path}/conan/"


def resolve(input, output, cache_path):
    cache_path = get_cache_path(cache_path)

    requirements = json.load(input)


def fetch(input, output, cache_path):
    pass


def install(input, cache_path, install_path):
    pass


try:
    if len(sys.argv) == 3 and sys.argv[1] == "resolve":
        resolve(sys.stdin, sys.stdout, sys.argv[2])
    elif len(sys.argv) == 3 and sys.argv[1] == "fetch":
        fetch(sys.stdin, sys.stdout, sys.argv[2])
    elif len(sys.argv) == 4 and sys.argv[1] == "install":
        install(sys.stdin, sys.argv[2], sys.argv[3])
    else:
        raise Exception("Unknown command")
except Exception as e:
    print(e, file=sys.stderr)
    sys.exit(1)
